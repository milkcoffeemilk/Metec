<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>主選單</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>

<body class="bg-gray-100">
  <!-- 🔹 主容器 -->
  <div id="mainContent" class="max-w-md mx-auto bg-white shadow-lg rounded-xl mt-4 overflow-hidden opacity-0 pointer-events-none transition-opacity duration-300">
    <!-- 頁籤列 -->
    <div class="flex border-b bg-gray-50">
      <button id="tab1" class="flex-1 py-3 text-center border-b-4 border-blue-500 font-bold">休假</button>
      <button id="tab2" class="flex-1 py-3 text-center text-gray-500">簽核</button>
      <button id="tab3" class="flex-1 py-3 text-center text-gray-500">查詢</button>
    </div>

    <!-- 內容區 -->
    <div id="content" class="p-4 space-y-3">
      <!-- 第一頁：休假 -->
      <div id="page1">
        <h2 class="text-lg font-bold mb-2 text-blue-700">休假功能</h2>
        <div class="grid grid-cols-2 gap-3">
          <button class="btn" onclick="redirectWithLineInfo('https://forms.office.com/pages/responsepage.aspx?id=rCHYGxjgW0ygmhv6Ps4KPuUFcCXvnRNHoygSAeRW4-NUQjI2VU5NUzFZMjhUOFpLUjA0UzA2WU1KNC4u&route=shorturl')">請假申請</button>
          <button class="btn" onclick="redirectWithLineInfo('http://220.133.248.150:81/WebCRM/Metec/')">請假查詢</button>
          <button class="btn" onclick="redirectWithLineInfo('http://220.133.248.150:81/WebCRM/Metec/LeaveCalendar.aspx')">假期行事曆</button>
          <button class="btn" onclick="redirectWithLineInfo('http://220.133.248.150:81/WebCRM/Metec/LeaveRules.aspx')">休假規範</button>
        </div>
      </div>

      <!-- 第二頁：簽核 -->
      <div id="page2" class="hidden">
        <h2 class="text-lg font-bold mb-2 text-green-700">簽核作業</h2>
        <div class="grid grid-cols-2 gap-3">
          <button class="btn" onclick="redirectWithLineInfo('http://220.133.248.150:81/WebCRM/Metec/SignList.aspx')">待簽清單</button>
          <button class="btn" onclick="redirectWithLineInfo('http://220.133.248.150:81/WebCRM/Metec/SignHistory.aspx')">簽核紀錄</button>
          <button class="btn" onclick="redirectWithLineInfo('http://220.133.248.150:81/WebCRM/Metec/SignDelegate.aspx')">代理設定</button>
          <button class="btn" onclick="redirectWithLineInfo('http://220.133.248.150:81/WebCRM/Metec/SignHelp.aspx')">簽核說明</button>
        </div>
      </div>

      <!-- 第三頁：查詢 -->
      <div id="page3" class="hidden">
        <h2 class="text-lg font-bold mb-2 text-purple-700">查詢中心</h2>
        <div class="grid grid-cols-2 gap-3">
          <button class="btn" onclick="redirectWithLineInfo('http://220.133.248.150:81/WebCRM/Metec/AttendanceQuery.aspx')">出勤查詢</button>
          <button class="btn" onclick="redirectWithLineInfo('http://220.133.248.150:81/WebCRM/Metec/PayrollQuery.aspx')">薪資查詢</button>
          <button class="btn" onclick="redirectWithLineInfo('http://220.133.248.150:81/WebCRM/Metec/OvertimeQuery.aspx')">加班查詢</button>
          <button class="btn" onclick="redirectWithLineInfo('http://220.133.248.150:81/WebCRM/Metec/Faq.aspx')">常見問題</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 🔹 載入中畫面 -->
  <div id="loadingOverlay" class="fixed inset-0 bg-gray-800 bg-opacity-75 flex flex-col justify-center items-center text-white z-50">
    <svg class="animate-spin h-12 w-12 text-white mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path>
    </svg>
    <p class="text-lg">正在初始化 LINE LIFF，請稍候...</p>
  </div>

  <style>
    .btn {
      background-color: #3b82f6;
      color: white;
      padding: 0.75rem;
      border-radius: 0.75rem;
      font-weight: bold;
      transition: background-color 0.2s;
    }
    .btn:hover { background-color: #2563eb; }
  </style>

  <script src="liff_utils.js"></script>
  <script src="script.js"></script>
</body>
</html>
